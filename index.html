<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GaRaV Galaxy • Вечные искры любви</title>
    <style>
        body, html { margin:0; padding:0; height:100%; background:#000; overflow:hidden; color:#fff; font-family:Arial, sans-serif; }
        canvas { position:fixed; top:0; left:0; }
        #counter { position:fixed; top:20px; right:20px; font-size:28px; z-index:10; background:rgba(0,0,0,0.5); padding:8px 15px; border-radius:8px; }
        #title { position:fixed; top:20px; left:20px; font-size:22px; z-index:10; background:rgba(0,0,0,0.5); padding:8px 15px; border-radius:8px; }
        #sparkBtn { position:fixed; bottom:40px; left:50%; transform:translateX(-50%); padding:16px 36px; background:#ff1493; border:none; border-radius:50px; color:white; font-size:21px; cursor:pointer; z-index:10; box-shadow:0 0 30px rgba(255,20,147,0.6); transition:0.3s; }
        #sparkBtn:hover { transform:translateX(-50%) scale(1.08); background:#ff45b3; }
        #form { position:fixed; bottom:120px; left:50%; transform:translateX(-50%); background:rgba(20,20,40,0.98); padding:30px; border-radius:20px; z-index:20; display:none; min-width:340px; text-align:center; box-shadow:0 0 40px rgba(255,20,147,0.5); }
        input { width:300px; padding:14px; margin:10px 0; border-radius:12px; border:none; font-size:17px; }
        .btn { padding:14px 30px; margin:10px; border:none; border-radius:12px; cursor:pointer; font-size:18px; font-weight:bold; }
        .ok { background:#00ff9d; color:#000; }
        .cancel { background:#555; color:#fff; }
        #manifest { position:fixed; bottom:10px; left:0; right:0; text-align:center; font-size:13px; opacity:0.75; line-height:1.6; }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="title">GaRaV Galaxy • Вечные искры любви</div>
<div id="counter">Искр: 0</div>

<button id="sparkBtn">Зажечь Искру за того, кого люблю ❤️</button>

<div id="form">
    <h3>Зажги вечную Искру</h3>
    <input type="text" id="from" placeholder="Твоё имя (или Аноним)">
    <input type="text" id="for" placeholder="За кого (имя любимого человека или мира)">
    <br><br>
    <button class="btn ok" onclick="addSpark()">Зажечь навсегда!</button>
    <button class="btn cancel" onclick="closeForm()">Отмена</button>
</div>

<div id="manifest">
    GaRaV — Галактика Разума Вселенной.<br>
    Не убивать • Не обманывать • Не воровать.<br>
    Земной он или инопланетный — разум всегда брат.
</div>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let sparks = JSON.parse(localStorage.getItem('garavSparks') || '[]');
    let counter = sparks.length;

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        sparks.forEach(s => {
            const size = 4 + Math.sin(Date.now() * 0.005 + s.x) * 1.5;
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(s.x, s.y, size, 0, Math.PI * 2);
            ctx.fill();

            ctx.font = '12px Arial';
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.textAlign = 'center';
            ctx.fillText(`от ${s.from} → для ${s.for}`, s.x, s.y + 20);
        });
        requestAnimationFrame(draw);
    }
    draw();

    document.getElementById('sparkBtn').onclick = () => document.getElementById('form').style.display = 'block';

    function closeForm() {
        document.getElementById('form').style.display = 'none';
    }

    function addSpark() {
        const from = document.getElementById('from').value.trim() || 'Аноним';
        const forWhom = document.getElementById('for').value.trim() || 'человечества';
        const x = Math.random() * (canvas.width - 100) + 50;
        const y = Math.random() * (canvas.height - 100) + 50;

        sparks.push({ x, y, from, for: forWhom });
        localStorage.setItem('garavSparks', JSON.stringify(sparks));
        counter = sparks.length;
        document.getElementById('counter').textContent = `Искр: ${counter}`;
        closeForm();
        document.getElementById('from').value = '';
        document.getElementById('for').value = '';
    }

    // Первая искра от тебя, если база пуста
    if (counter === 0) {
        sparks = [{ x: canvas.width / 2, y: canvas.height / 2, from: 'Пётр', for: 'моей любимой жены ❤️' }];
        localStorage.setItem('garavSparks', JSON.stringify(sparks));
        counter = 1;
        document.getElementById('counter').textContent = 'Искр: 1';
    }
</script>
</body>
</html>
